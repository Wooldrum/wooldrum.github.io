<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Editor — Woodrum</title>
  <meta name="color-scheme" content="dark">

  <!-- Brand variables (match site) -->
  <style>
    :root{
      --bg:#0a1020;
      --panel:#0d152b;
      --line:#22345b;
      --text:#e7efff;
      --muted:#9fb2de;
      --accent:#59a3ff;
      --danger:#ff6961;
      --success:#59ffa3;
      --radius:12px;
    }
    html,body{height:100%}
    body{
      margin:0;
      background:var(--bg);
      color:var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI",
                   Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji",
                   "Segoe UI Emoji";
    }
    /* Preload styles so there’s no flash */
    #app{min-height:100vh;background:var(--bg)}
  </style>

  <!-- Our overrides for Decap UI -->
  <link rel="stylesheet" href="./admin.css">
  <!-- Post preview styles (uses site palette & type scale) -->
  <link rel="stylesheet" href="./preview.css">
</head>
<body>
  <div id="app"></div>

  <!-- Decap CMS -->
  <script src="https://unpkg.com/decap-cms-app@^3.0.0/dist/decap-cms.js"></script>

  <script>
    // Load preview CSS into iframe as well
    window.CMS?.registerPreviewStyle('./preview.css');

    // Optional: simple “published” badge color tweak
    CMS.registerEventListener({
      name: 'preSave',
      handler: ({entry}) => entry
    });
  </script>

  <!-- Use external config.yml (below) -->
  <script>
    // Nothing else needed—Decap auto-loads /admin/config.yml
  </script>
</body>
</html>
